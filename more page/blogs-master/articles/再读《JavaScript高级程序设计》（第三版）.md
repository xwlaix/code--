# 再读《JavaScript高级程序设计》（第3版）

> 大概在八月中下旬的时候，非常有幸的参与到图灵社区的读书活动，也非常有幸的被选做《JavaScript高级程序设计》（第3版）的领读者。从9月1号到10月12号（42天时间）完成了对《高程》全篇的再次阅读，收获和感悟其实都非常多。
>
 
《高程》又称红宝书，有人称《高程》为前端方面最经典的书，也有人称看完《高程》，前端才算是真的入门了。那我们就从此书出发，看看入门前端需要哪些方面的知识。

> 这几年前端发展变化迅速，而此书成书时间又较早（英文版2011年出，中文版2012年出），书中不免有些略显过时的地方，但是这些都不妨碍此书是一本好书。

## 从《高程》看入门前端需要知道的知识

### `JavaScript`的历史和运用到浏览器中的几种方法
本书的第1章~第7章，围绕着`JavaScript`的历史和语法展开。JavaScript自1995年诞生至今变化巨大（从简单的脚本验证到可开发复杂的web应用），其每项功能的加入，每项特性的出现都有其历史原因，了解JS的历史可以帮助我们理解如今的JavaScript为何会是如今这样。

> 除了本书的第一章，更多关于JavaScript的历史可以参考[A Brief History of JavaScript](https://auth0.com/blog/a-brief-history-of-javascript/)和[ECMAScript简史 和 JavaScript的未来](https://github.com/zhangwang1990/PracticeModernJavaScript/blob/master/docs/%E7%AC%AC1%E7%AB%A0.%20ECMAScript%20%E5%92%8C%20JavaScript%E7%9A%84%E6%9C%AA%E6%9D%A5.md)。

现今的JavaScript可运行于前端和服务器端，很遗憾，本书未对Node.js做介绍，不过对在html中添加js讲解得非常细致。大家可能知道使用 `<script>` 元素的方式有两种：直接在页面中嵌入 `JavaScript` 代码和包含外部 `JavaScript` 文件,但却不一定知道`<script>`标签支持的六个属性`async`,`charset`,`defer`,`src`,`type`以及已经废弃了的`language`。读《高程》的第2章，你将了解很多这方面的细节问题。

**检测一下：**

> `<script>`标签的属性`defer`和`async`分别是什么意思？
> 

**回答：**
> 如果给`<script>`标签加上`defer`，表明脚本会立即下载但是会被延迟到整个页面都解析完毕后再运行，`async `与 `defer`的功能类似，但是不同的是，标记为 `async` 的脚本并不保证按照指定它们的先后顺序执行。

### 应当理解和熟记的基本概念

一些基本概念构成了`JavaScript`的骨架，整个JavaScript世界都在此骨架的基础上衍生。这些基本概念包括语法，操作符，数据类型，流程控制语句以及函数。

#### 简单的理解JS

**语法规则**定义了语言结构，JavaScript的在语法实现上大量借鉴了`C`,`Java`,`Perl`等语言的语法，如果你熟悉这些语言，用起来肯定会觉得非常亲切。具体说来JS是区分大小写的，其标识符的定义有确定的规则，它有两种注释方法，语句一般推荐以分号结尾。

**操作符**用以定义某条指令应该进行什么样的操作，具体到JS《高程》中介绍了10种操作符，不过其与众不同之处在于，大多数操作符都可以适用于很多值，在运用之前会进行相应的类型转换，这也是JS尤其让人疑惑的地方之一。

**数据类型**在数据结构中的定义是一个值的集合以及定义在这个值集上的一组操作。JS具备6种原始数据类型（《高程》中只讲述了五种`Undifined`,`Null`,`Boolean`,`Number`,`String`,`Object`，ES6新增`Symbol`）以及一种复杂类型--`Object`对象。

ECMAScript提供了3个特殊的引用类型用以方便操作基本类型值：`boolean`,`Number`,`String`。

**流程控制语句**通常使用一个或多个关键字来完成给定的任务，其定义了ECMAScript的语法规则。

要开始使用js来，我们还需要知晓变量的定义方法，为了合理的定义变量，我们也应该了解JS中的关键字和保留字。

至此，我们已经可以开始写简单的脚本语句了。

**函数**可以封装任意多条语句，而且可以在任何地方任何时候调用执行。它对任何一门语言来说都是一个核心概念。学习函数，我们不仅应该知晓其定义方式，调用方式，还应该理解JS函数中的参数，JS中的函数可以接受任意个数任何类型的参数。JS中的函数没有函数签名，所以也没有重载。

#### 深入理解JS
有些东西是表象的，很容易理解，有些内容则是浏览器在后台运行的，没有那么容易理解。

**变量**分基本类型值和引用类型值，基本类型值值得是简单的数据段（可以访问保存在变量中的实际的值），而引用类型值值得的那些可能由多个值构成的对象（不能直接操作对象的内存空间）。

两种类型的值在复制时差异巨大。`instanceof`操作符可以用作检测引用类型的值。

**执行环境**定义了变量或函数有权访问的其他数据，每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。

> 每个函数都有自己的执行环境，当执行流进入一个函数时，环境会被推入下一个环境栈中，函数执行之后，栈将其环境弹出，把控制器交换给之前的执行环境。
> 

**作用域链**保证对执行环境有权访问的所有变量和函数的有序访问。

标识符解析是沿着作用域链一级一级地搜索标识符的过程。全局执行环境的变量对象始终都是作用域链中的最后一个对象。

有些语句可以临时在作用域链的前端临时增加一个变量对象（在代码执行后会被移除）。`try...catch`中的`catch`,`with`。

从ES6开始，通过`const`,`let`声明的变量是具有块作用域的，本文在此处的描述有误。

> 初步理解了JS的实现机制。

JavaScript具有自动垃圾收集机制，执行环境会负责管理代码执行过程中使用的内存。原理是找出那些不再继续使用的变 量，然后释放其占用的内存。为此，垃圾收集器会按照固定的时间间隔（或代码执行中预定的收集时间）， 周期性地执行这一操作。

垃圾收集器必须跟踪哪个变量有用哪个变量没用，对于不再有用的变量打上标记，以备将来收回其占用的内存。标记清除是目前主流的垃圾收集算法。


**检测一下：**

1. `typeof`操作符用以检测数据类型时有哪些缺陷？
2. 逗号操作符的返回值是什么？
3. 怎么理解`arguments`对象？
4. 什么是标记清楚？什么是引用计数？
5. 


本文未完...可能需要再读一次本书再补充...



